<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Fashion Muslim JSON Generator</title>
<style>
.section-title,label{display:block;font-weight:700}.section-title,.tag span,button.generate,label{font-weight:700}.search-container,pre{position:relative}body{font-family:Inter,-apple-system,sans-serif;background:#dedede;padding:20px;color:#333;margin:0}.container{max-width:768px;margin:auto;background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.08)}.section,pre{padding:20px}h2{text-align:center;color:#2c3e50}.section{margin-bottom:25px;border:1px solid #eee;border-radius:10px;background:#fff}.section-title{color:#3182ce;margin-bottom:15px;text-transform:uppercase;font-size:.85em;letter-spacing:1px}.tag,label{font-size:12px}.grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}label{margin-bottom:5px;color:#4a5568}input{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:6px;box-sizing:border-box}.tag-box{display:flex;flex-wrap:wrap;gap:6px;padding:8px;border:1px solid #e2e8f0;border-radius:6px;min-height:40px;background:#f8fafc;margin-bottom:8px}.tag{background:#3182ce;color:#fff;padding:2px 8px;border-radius:4px;display:flex;align-items:center}.tag span{margin-left:6px;cursor:pointer}.suggestions{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #cbd5e0;border-radius:6px;z-index:100;max-height:318px;overflow-y:auto;display:none;box-shadow:0 10px 15px -3px rgba(0,0,0,.1)}.suggestions div{padding:8px 12px;cursor:pointer;font-size:14px;border-bottom:1px solid #edf2f7}.suggestions div:hover{background:#ebf8ff;color:#2b6cb0}button.generate{width:100%;background:#92703e;color:#fff;padding:15px;border:none;border-radius:8px;font-size:16px;cursor:pointer;margin-top:10px;transition:.3s}button.generate:hover{background:#000}pre{background:#1a202c;color:#48bb78;border-radius:8px;overflow-x:auto;font-family:'Courier New',monospace}.copy-btn{position:absolute;top:10px;right:10px;background:#38a169;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}
</style>
</head>
<body>
<div class="container">
    <h2>Fashion Muslim JSON Builder</h2>
    <form id="catalogForm">
        <div class="section">
            <span class="section-title">Informasi Dasar</span>
            <div class="grid">
                <div><label>Searched</label><input type="text" name="searched" value="M"></div>
                <div><label>Product Name</label><input type="text" name="name" placeholder="Nama Produk"></div>
                <div><label>Image URL</label><input type="text" name="image" placeholder="imageURL"></div>
                <div><label>Price</label><input type="text" name="price" value="Rp"></div>
                <div style="grid-column: span 2;"><label>Article URL</label><input type="text" name="articleUrl" placeholder="articleURL"></div>
            </div>
        </div>
        <div class="section">
            <span class="section-title">Kategori Level</span>
            <label>Category (Level 1)</label>
            <div class="tag-box" id="category-tags"></div>
            <div class="search-container">
                <input type="text" id="category-input" placeholder="Cari & Pilih..." autocomplete="off">
                <div class="suggestions" id="category-suggestions"></div>
            </div>
            <label style="margin-top:15px">Sub-Category (Level 2)</label>
            <div class="tag-box" id="subcategory-tags"></div>
            <div class="search-container">
                <input type="text" id="subcategory-input" placeholder="Cari & Pilih..." autocomplete="off">
                <div class="suggestions" id="subcategory-suggestions"></div>
            </div>
            <label style="margin-top:15px">Sub-Sub (Level 3)</label>
            <div class="tag-box" id="subsub-tags"></div>
            <div class="search-container">
                <input type="text" id="subsub-input" placeholder="Cari & Pilih..." autocomplete="off">
                <div class="suggestions" id="subsub-suggestions"></div>
            </div>
        </div>
        <div class="section">
            <span class="section-title">Marketplace Links</span>
            <div class="grid" id="links-inputs"></div>
        </div>
        <button type="submit" class="generate">GENERATE JSON STRUCTURE</button>
    </form>
	<div id="output-area" style="display:none; margin-top: 30px;">
		<label>JSON Result:</label>
		<div style="position: relative;">
			<button class="copy-btn" onclick="copyJSON()">Copy</button>
			<pre id="jsonResult"></pre>
		</div>
		<div style="display: flex; gap: 10px; margin-top: 15px;">
			<button onclick="copyJSON()" style="flex: 1; background: #38a169; color: white; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">COPY JSON</button>
			<button onclick="resetForm()" style="flex: 1; background: #e53e3e; color: white; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">RESET FORM</button>
		</div>
	</div>
</div>

<script>
	// Data Master untuk Pilihan Dropdown
    const masterData = {
	category: {
	"GAUN & DRESS PANJANG":[
		"gamis",
		"kaftan",
		"abaya",
		"dress panjang",
		"daster & gaun santai"
	],
	"ATASAN MUSLIMAH":[
		"tunik",
		"blus",
		"outer & cardigan"
	],	
	"BAWAHAN MUSLIMAH":[
		"rok panjang",
		"rok celana",
		"celana panjang",
		"skirt & hybrid style",
		"bawahan tradisional modern"
	],	
	"Pilih Preferensi - Multi-Select":[
		"tren",
		"rekomendasi",
		"panjang busana",
		"gaya",
		"kegiatan",
		"material",
		"harga",
		"koleksi merek",
		"edisi premium",
		"ukuran besar"
	],
	"Setelan & Busana Fungsional":[
		"pakaian kantor & setelan muslimah",
		"pakaian muslim untuk bepergian",
		"setelan busana & keluarga"
	],
	"Hijab & Aksesoris":[
		"hijab",
		"aksesoris"
	],
	"PAKAIAN MUSLIM PRIA":[
		"pakaian muslim pria",
		"aksesoris pria"
	],
	"PERLENGKAPAN IBADAH":[
		"mukena",
		"sajadah",
		"tas ibadah"
	]
	},
	subcategory: {
		"gamis":[
			"gamis harian/santai",
			"gamis pesta",
			"gamis brokat & bordir",
			"gamis polos minimalis",
			"gamis simple mewah",
			"gamis syari",
			"gamis tradisional",
			"gamis berlapis",
			"gamis sporty",
			"gamis beraksen",
			"gamis modern",
			"gamis busui friendly"
		],
		"kaftan":[
			"kaftan satin/silk",
			"kaftan brokat/etnik",
			"kaftan harian",
			"kaftan batik",
			"kaftan satu set",
			"kaftan rumah"
		],
		"abaya":[
			"abaya dubai/premium",
			"abaya kimono style",
			"abaya harian",
			"abaya minimalis",
			"abaya set hijab",
			"abaya ibu hamil"
		],
		"dress panjang":[
			"dress casual",
			"dress kaos",
			"dress pesta",
			"dress formal",
			"dress berlapis",
			"dress polos minimalis",
			"dress ruffle/frill",
			"dress a-line",
			"dress empire waist",
			"dress motif/printed",
			"dress denim/linen",
			"dress sporty",
			"dress modern asimetris"
		],
		"daster & gaun santai":[
			"daster kekinian",
			"daster tidur",
			"daster kaos",
			"daster katun/rayon",
			"daster motif/batik",
			"daster polos",
			"daster busui friendly"
		],
		"tunik":[
			"tunik harian",
			"tunik polos",
			"tunik motif/printed",
			"tunik oversize",
			"tunik formal",
			"tunik linen/katun",
			"tunik kebaya",
			"tunik ibu hamil"
		],
		"blus":[
			"blus polos",
			"blus motif/printed",
			"blus formal",
			"blus brokat/lace",
			"blus berlapis",
			"blus ukuran besar",
			"blus kimono style",
			"blus ruffle/frill",
			"blus lengan puff",
			"blus asimetris",
			"blus linen/katun",
			"blus peplum",
			"blus batik/etnik"
		],
		"outer & cardigan":[
			"kimono outer muslimah",
			"blazer muslimah",
			"denim outer muslimah",
			"kardigan",
			"vest panjang muslimah",
			"cape outer",
			"jaket muslimah",
			"hoodie muslimah"
		],
		"rok panjang":[
			"rok plisket",
			"rok a-line",
			"rok lilit",
			"rok tulle",
			"rok denim",
			"rok batik/etnik"
		],
		"celana panjang":[
			"celana kulot",
			"celana palazzo",
			"celana pleated",
			"celana jogger",
			"celana straight cut",
			"celana high waist",
			"celana cargo",
			"celana denim",
			"celana wide leg"
		],
		"skirt & hybrid style":[
			"skirt over pants",
			"skort muslimah",
			"wrap pants"
		],
		"bawahan tradisional modern":[
			"sarung instan muslimah",
			"celana batik",
			"celana tenun"
		],
		"tren":[
			"abaya modern",
			"sarimbit",
			"baju kurung",
			"hijab ombre"
		],
		"rekomendasi":[
			"produk terlaris",
			"paling favorit",
			"pilihan editor"
		],
		"panjang busana":[
			"panjang/maxi",
			"midi",
			"plus size"
		],
		"gaya":[
			"syari",
			"kekinian",
			"santai",
			"minimalis",
			"anggun",
			"sporty",
			"tradisional/etnik"
		],
		"kegiatan":[
			"harian",
			"kerja",
			"pesta",
			"travel",
			"ibadah"
		],
		"material":[
			"katun",
			"linen",
			"satin/silk",
			"brokat",
			"rayon",
			"ceruty",
			"crinkle",
			"cloud mist",
			"matte satin",
			"texture silk"
		],
		"harga":[
			"under 50k",
			"50k-150k",
			"150k-350k",
			"350k-750k",
			"750k-1500k",
			"1500k++"
		],
		"koleksi merek":[
			"belimukena premium",
			"lozy hijab",
			"diario",
			"tazbiya",
			"khadijah label",
			"sabamodest",
			"mayra",
			"agnes hijab",
			"elzatta",
			"dian pelangi",
			"casa elana",
			"shafira",
			"miss marina",
			"monel",
			"kivitz",
			"ria miranda",
			"mfmw",
			"rabbani",
			"si.se.sa",
			"suqma",
			"tunecca",
			"zoya",
			"vanilla hijab"
		],
		"edisi premium":[
			"gamis bordir & brokat premium",
			"abaya dubai premium",
			"hijab silk & satin",
			"aksesoris muslimah mewah"
		],
		"ukuran besar":[
			"gaun & dress besar",
			"atasan plus size",
			"bawahan plus size",
			"setelan plus size",
			"hijab plus size"
		],
		"pakaian kantor & setelan muslimah":[
			"tunik formal untuk kerja",
			"blazer & abaya profesional",
			"setelan blus & rok/celana",
			"setelan tunik & celana kulot",
			"setelan blus & rok plisket",
			"setelan outer & inner"
		],
		"pakaian muslim untuk bepergian":[
			"travel abaya",
			"travel tunic & pants set",
			"hijab anti kusut",
			"outer lightweight muslimah",
			"gamis sporty travel"
		],
		"setelan busana & keluarga":[
			"setelan hijab + gamis",
			"setelan hijab + tunik",
			"setelan keluarga/sarimbit",
			"setelan suami & istri",
			"setelan ibu–anak",
			"setelan ayah–anak",
			"busana keluarga lebaran"
		],
		"hijab":[
			"hijab segi empat",
			"hijab polos/netral",
			"hijab motif/printed",
			"hijab pashmina",
			"hijab turban",
			"hijab dengan earrings",
			"hijab premium",
			"hijab instan/khimar"
		],
		"aksesoris":[
			"ciput/inner hijab",
			"syal/pashmina",
			"bros & peniti hijab"
		],
		"pakaian muslim pria":[
			"kemeja koko",
			"koko polos & minimalis",
			"koko bordir & brokat",
			"koko batik & etnik",
			"jubah/thobe",
			"jubah daily",
			"jubah pesta",
			"sarung & baju muslim",
			"sarung modern",
			"set sarung & koko"
		],
		"aksesoris pria":[
			"peci/songkok",
			"sorban",
			"tasbih & parfum muslim"
		],
		"mukena":[
		  	"mukena harian",
		  	"mukena jumbo",
		  	"mukena travel",
		  	"mukena ringan",
		  	"mukena terusan",
		  	"mukena premium",
			"mukena parasut",
			"mukena silk",
			"mukena polos",
			"mukena motif",
			"mukena anak",
		  	"mukena hadiah"
		],
		"sajadah":[
		  	"sajadah harian",
		  	"sajadah travel",
		  	"sajadah tipis",
		 	"sajadah tebal",
		  	"sajadah premium",
		  	"sajadah parasut",
			"sajadah anti slip",
			"sajadah polos/minimalis",
			"sajadah motif",
			"sajadah beludru/velvet",
			"sajadah anak",
		  	"sajadah hadiah"
		],
		"tas ibadah":[
		  	"tas mukena & sajadah",
		  	"tas travel ibadah",
		  	"tas ibadah mini",
		  	"tas ibadah serut",
		  	"tas ibadah waterproof",
		  	"tas ibadah premium",
			"tas ibadah polos/minimalis",
			"tas ibadah motif",
		  	"tas ibadah hadiah"
		]
	  },
      subsub: {
			"kardigan":[
				"kardigan panjang",
				"kardigan rajut",
				"kardigan ukuran besar",
				"kardigan depan terbuka",
				"kardigan berikat pinggang",
				"kardigan ruffle/berlapis",
				"kardigan sporty",
				"kardigan crop",
				"kardigan brokat/lace",
				"kardigan batik/etnik"
			],
			"hijab segi empat":[
				"hijab voal",
				"hijab silk/satin",
				"hijab cornskin/crinkle"
			],
			"hijab pashmina":[
				"pashmina crinkle",
				"pashmina ceruty babydoll",
				"pashmina plisket"
			],
			"hijab instan/khimar":[
				"khimar 2 lapis",
				"khimar panjang",
				"khimar soft pad/non pad",
				"khimar syari jumbo",
				"khimar instan busui"
			]
	  }
    };

    const selectedData = { category: [], subcategory: [], subsub: [] };

    // 2. Marketplace Config
    const marketplaceConfigs = [
        { logo: "logo-tiktok", title: "TikTok" },
        { logo: "logo-shopee", title: "Shopee" },
        { logo: "logo-tokopedia", title: "Tokopedia" },
        { logo: "logo-lazada", title: "Lazada" },
        { logo: "logo-blibli", title: "Blibli" },
        { logo: "logo-zalora", title: "Zalora" },
        { logo: "logo-sephora", title: "Sephora" }
    ];
    
	const linksContainer = document.getElementById('links-inputs');
	marketplaceConfigs.forEach(m => {
		linksContainer.innerHTML += `
			<div>
				<label>${m.title}</label>
				<input type="text" class="m-link" 
					   data-logo="${m.logo}" 
					   data-title="Beli di ${m.title}" 
					   data-type="${m.title}" 
					   placeholder="Paste URL">
			</div>`;
	});

    // 3. Fungsi Menampilkan Saran (Suggestions) dengan Mapping
	function showSuggestions(type, query) {
		const suggestions = document.getElementById(`${type}-suggestions`);
		let html = "";
		const q = query.toLowerCase();

		if (type === 'category') {
			// Logika untuk Category yang Berkelompok
			for (const groupName in masterData.category) {
				const filtered = masterData.category[groupName].filter(item => 
					item.toLowerCase().includes(q) && 
					!selectedData.category.includes(item)
				);

				if (filtered.length > 0) {
					// Header Grup (Patung)
					html += `<div style="background:#f1f5f9; font-weight:bold; color:#3182ce; font-size:14px; padding:5px 12px; cursor:default; border-bottom:1px solid #e2e8f0;">— ${groupName.toUpperCase()}</div>`;
					html += filtered.map(item => `<div onclick="addTag('${type}', '${item}')" style="padding-left:20px;">${item}</div>`).join('');
				}
			}
		} else {
			// Logika untuk Sub dan Sub-Sub (Berdasarkan Parent yang dipilih)
			const parentType = type === 'subcategory' ? 'category' : 'subcategory';
			const source = masterData[type];

			selectedData[parentType].forEach(parent => {
				if (source[parent]) {
					const filtered = source[parent].filter(item => 
						item.toLowerCase().includes(q) && 
						!selectedData[type].includes(item)
					);

					if (filtered.length > 0) {
						html += `<div style="background:#f1f5f9; font-weight:bold; color:#3182ce; font-size:14px; padding:5px 12px; cursor:default;">— MILIK: ${parent.toUpperCase()}</div>`;
						html += filtered.map(item => `<div onclick="addTag('${type}', '${item}')" style="padding-left:20px;">${item}</div>`).join('');
					}
				}
			});
		}

		if (html !== "") {
			suggestions.innerHTML = html;
			suggestions.style.display = 'block';
		} else {
			suggestions.style.display = 'none';
		}
	}

    // 4. Fungsi Tambah Tag
    function addTag(type, value) {
        if (!selectedData[type].includes(value)) {
            selectedData[type].push(value);
            renderTags(type);
        }
        document.getElementById(`${type}-input`).value = '';
        document.getElementById(`${type}-suggestions`).style.display = 'none';
    }

    function renderTags(type) {
        const container = document.getElementById(`${type}-tags`);
        container.innerHTML = selectedData[type].map(t => `
            <div class="tag">${t}<span onclick="removeTag('${type}', '${t}')">×</span></div>
        `).join('');
        // Refresh level di bawahnya jika level atas berubah (opsional)
        if(type === 'category') renderTags('subcategory');
    }

    window.removeTag = (type, value) => {
        selectedData[type] = selectedData[type].filter(i => i !== value);
        renderTags(type);
    };

    function setupSearch(type) {
        const input = document.getElementById(`${type}-input`);
        const suggestions = document.getElementById(`${type}-suggestions`);
        input.addEventListener('focus', () => showSuggestions(type, input.value));
        input.addEventListener('input', () => showSuggestions(type, input.value));
        document.addEventListener('click', (e) => {
            if (!input.contains(e.target) && !suggestions.contains(e.target)) suggestions.style.display = 'none';
        });
    }

    setupSearch('category');
    setupSearch('subcategory');
    setupSearch('subsub');

    // 5. Form Submit & JSON Generate
    document.getElementById('catalogForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const fd = new FormData(e.target);
        const links = Array.from(document.querySelectorAll('.m-link'))
            .filter(el => el.value.trim() !== "")
            .map(el => ({ logo: el.dataset.logo, url: el.value.trim(), "data-type": el.dataset.type, title: el.dataset.title }));

        const result = {
            searched: fd.get('searched'),
            name: fd.get('name'),
            image: fd.get('image'),
            price: fd.get('price'),
            category: selectedData.category.map(v => v.toLowerCase()),
            subcategory: selectedData.subcategory.map(v => v.toLowerCase()),
            subsub: selectedData.subsub.map(v => v.toLowerCase()),
            articleUrl: fd.get('articleUrl'),
            links: links
        };
        document.getElementById('jsonResult').textContent = JSON.stringify(result, null, 4);
        document.getElementById('output-area').style.display = 'block';
    });

    function copyJSON() {
        navigator.clipboard.writeText(document.getElementById('jsonResult').textContent);
        alert('JSON Copied!');
    }

    function resetForm() {
        if (confirm('Reset ulang semua?')) {
            location.reload();
        }
    }
</script>
</body>
</html>
