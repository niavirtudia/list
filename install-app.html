<!DOCTYPE html>
<html lang="id">
<head>
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MNJR3QW');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://list.modenyania.com/install-app.html" rel="canonical"/>
  <title>Install BFL</title>
  <meta content="Instal BFL! Pakai layaknya aplikasi, aman, hemat data & lebih ringan, akses instan tanpa buka browser, dapatkan notifikasi terbaru, dan tanpa instal file tambahan." name="description"/>
  <link rel="manifest" href="/manifest.json">
  <meta name="robots" content="index, follow"/>
  <meta name="author" content="Modenyania"/>
  <link href="/ico.svg" rel="mask-icon" color="#D0011B"/>
  <link href="/ico.svg" rel="icon" type="image/svg+xml"/>
  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="/ico.png" rel="icon" type="image/png"/>
  <link href="https://list.modenyania.com/install-app.html" hreflang="id" rel="alternate"/>
  <link href="https://list.modenyania.com/install-app.html" hreflang="x-default" rel="alternate"/>
  <meta name="google-site-verification" content="h-fxdVpC6nibb7jbdH8eH0S132BP_LYwVEGaimeLEx0"/>
  <meta name="facebook-domain-verification" content="8hw4ga6q5c1zxpk2pxvv568cmjm1vs"/>
  <meta name="msvalidate.01" content="58D08496CCEF5DCDF119DCA58FB71A80" />
  <meta name="yandex-verification" content="e230bf8571760855"/>
  <meta name="ahrefs-site-verification" content="a1755296c1fae1b7f0740b6b8df7908e619fee2376e5c9e31cb7de553b3352f6"/>
  <meta name="p:domain_verify" content="bff964953d176fb1c5e061b4b417653c"/>
  <meta content="#D0011B" name="theme-color"/>
  <meta content="#D0011B" name="msapplication-navbutton-color"/>
  <meta content="yes" name="apple-mobile-web-app-capable"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta content="#D0011B" name="apple-mobile-web-app-status-bar-style"/>
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png"/>
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/icon/apple-touch-icon-180x180.png"/>
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png"/>
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png"/>
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png"/>
  <link rel="icon" type="image/png" sizes="192x192" href="/icon/app-icon-192.png"/>
  <link rel="icon" type="image/png" sizes="512x512" href="/icon/app-icon-512.png"/>
  <!-- Open Graph Meta -->
  <meta property="og:title" content="Install BFL"/>
  <meta property="og:description" content="Instal BFL! Pakai layaknya aplikasi, aman, hemat data & lebih ringan, akses instan tanpa buka browser, dapatkan notifikasi terbaru, dan tanpa instal file tambahan."/>
  <meta property="og:image" content="https://www.modenyania.com/icon/thumb_modenyania.png"/>
  <meta property="fb:app_id" content="5329195940499911"/>
  <meta property="og:url" content="https://list.modenyania.com/install-app.html"/>
  <meta property="og:type" content="product"/>
  <meta property="og:site_name" content="Modenyania" />
  <meta property="og:locale" content="id" />
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Instal BFL! Pakai layaknya aplikasi, aman, hemat data & lebih ringan, akses instan tanpa buka browser, dapatkan notifikasi terbaru, dan tanpa instal file tambahan."/>
  <meta name="twitter:image" content="https://www.modenyania.com/icon/thumb_modenyania.png"/>
  <meta name="twitter:site" content="@modenyania" />
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Beauty & Fashion List",
    "url": "https://list.modenyania.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://list.modenyania.com/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      line-height: 1.6;
    }
    .install-app {
      padding: 30px;
      margin: 0 auto;
      max-width: 640px;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    h2 {
      font-size: 1.3rem;
      margin-bottom: 1rem;
    }
    .headline {
      display: none;
    }
    .info {
      margin-bottom: 2.5rem;
    }
    .action {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .install-btn {
      background: #D0011B;
      color: #fff;
      border: none;
      padding: 0.8rem 1.2rem;
      border-radius: 999px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: background 0.2s ease-in-out;
      text-decoration: none;
      line-height: 1.5;
    }
    .install-btn:hover {
      background: #000000;
    }
    .popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .popup-box {
      background: #fff;
      padding: 20px;
      max-width: 320px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
      margin: 25px auto;
    }
    .popup-box h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }
    .popup-box p {
      font-size: 0.95rem;
      margin-bottom: 15px;
    }
    .popup-box button {
      background: #D0011B;
      color: #fff;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .popup-box button:hover {
      background: #000000;
    }
  </style>
</head>
<body>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js")
      .then(() => console.log("Service Worker registered"))
      .catch(err => console.log("SW registration failed:", err));
  }
</script>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MNJR3QW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <div class="install-app">
    <h1 class="headline">Koleksi Skincare Yang Bagus & Outfit Yang Tren</h1>
    <div class="info">
      <h2>Install BFL</h2>
      <p><b>Modenyania <i>Beauty & Fashion List</i> (BFL)</b> adalah koleksi produk kecantikan dan fashion terbaik yang bisa menjadi alternatif pencarian produk yang kamu butuhkan.</p>
      <p>Menyajikan produk terbaik yang telah dikurasi dengan teliti untuk menyelesaikan semua masalah pencarian produk yang kamu butuhkan. Desain friendly dan fleksibel, jadi layak kamu dijadiin <b><i>personal beauty & fashion marketplace</i></b></p>
      <p>Selain itu, ada juga beberapa koleksi spesifik yang <i>ready</i> kamu akses kapan saja hanya dalam sekali instal.</p>
      <h2>Sekarang! Yap, Kapan Lagi?</h2>
      <p>Kamu bisa menikmati pengalaman lebih cepat dan praktis dengan menginstal aplikasi langsung di layar utama perangkat kamu. <b>Pakai layaknya aplikasi, aman, hemat data & lebih ringan, akses instan tanpa buka browser, dapatkan notifikasi terbaru, dan tanpa instal file tambahan.</b></p>
    </div>
    <div class="action">
      <button id="installBtn" class="install-btn">+ Install BFL</button>
      <a href="https://list.modenyania.com/" title="Beranda" class="install-btn home-mobile" target="_blank">Beranda</a>
    </div>
  </div>
  <div class="popup-overlay" id="iosPopup">
    <div class="popup-box">
      <h2>Install di iOS</h2>
      <p>1. Klik ikon <strong>Share</strong> di Safari<br>
         2. Pilih <strong>Add to Home Screen</strong><br>
         3. Selesai, aplikasi siap dipakai</p>
      <button id="closePopup">Tutup</button>
    </div>
  </div>
  <script>
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");
    const iosPopup = document.getElementById("iosPopup");
    const closePopup = document.getElementById("closePopup");
    const homeBtn = document.querySelector(".home-mobile");

    installBtn.style.display = "none";

    // Perbaikan 3: Hapus parameter _gl dan _gcl_au di client-side
    window.addEventListener('load', () => {
      const url = new URL(window.location.href);
      if (url.searchParams.has('_gl') || url.searchParams.has('_gcl_au')) {
        url.searchParams.delete('_gl');
        url.searchParams.delete('_gcl_au');
        window.history.replaceState({}, document.title, url.toString());
        // Simpan parameter untuk analitik jika consent diizinkan
        const consent = localStorage.getItem('cookie_consent') ? JSON.parse(localStorage.getItem('cookie_consent')) : {};
        if (consent.analytics) localStorage.setItem('ga_gl', url.searchParams.get('_gl') || '');
        if (consent.advertising) localStorage.setItem('ga_gcl_au', url.searchParams.get('_gcl_au') || '');
      }

      // Perbaikan 4: Update GTM dataLayer berdasarkan consent custom
      const consent = localStorage.getItem('cookie_consent') ? JSON.parse(localStorage.getItem('cookie_consent')) : { necessary: true, analytics: false, advertising: false };
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        'event': 'consent_updated',
        'analytics_storage': consent.analytics ? 'granted' : 'denied',
        'ad_storage': consent.advertising ? 'granted' : 'denied'
      });

      // Perbaikan 5: Aktifkan OneSignal prompt hanya jika analytics diizinkan
      if (consent.analytics) {
        OneSignal.showSlidedownPrompt();
      }
    });

    // Perbaikan 6: Perbaiki logika PWA (ganti BSL ke BFL)
    function hideInstallBtn() {
      installBtn.style.display = "none";
      localStorage.setItem("BFLInstalled", "true");
    }

    if (localStorage.getItem("BFLInstalled") === "true") {
      hideInstallBtn();
    }

    if (window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone) {
      hideInstallBtn();
    }

    window.addEventListener("beforeinstallprompt", (e) => {
      if (!localStorage.getItem("BFLInstalled")) {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = "block";
      }
    });

    installBtn.addEventListener("click", async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === "accepted") {
          console.log("User accepted install");
          hideInstallBtn();
        }
        deferredPrompt = null;
      } else {
        if (/iphone|ipad|ipod/i.test(navigator.userAgent)) {
          iosPopup.style.display = "flex";
        } else {
          alert("Jika tidak muncul prompt, coba gunakan menu 'Add to Home Screen' di browser.");
        }
      }
    });

    window.addEventListener("appinstalled", () => {
      hideInstallBtn();
    });

    closePopup.addEventListener("click", () => {
      iosPopup.style.display = "none";
    });

    // Perbaikan 7: Pastikan tautan internal bersih
    homeBtn.addEventListener("click", (e) => {
      e.preventDefault();
      window.open("https://list.modenyania.com/", "_blank");
    });
  </script>
</body>
</html>
